<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configurar Horario - MediConnect</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Calendar Sync Styles -->
    <link rel="stylesheet" href="/static/css/calendar_sync.css">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');
        
        * {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            font-feature-settings: 'cv11', 'ss01', 'ss03';
        }
        
        body {
            font-weight: 400;
            letter-spacing: -0.011em;
            line-height: 1.5;
        }
        
        h1, h2, h3, h4, h5, h6 {
            font-weight: 700;
            letter-spacing: -0.022em;
            line-height: 1.2;
        }
        
        html {
            scroll-behavior: smooth;
        }
        
        /* Gradient orbs for background */
        .gradient-orb {
            position: fixed;
            border-radius: 50%;
            filter: blur(60px);
            opacity: 0.2;
            animation: float-slow 20s infinite ease-in-out;
            pointer-events: none;
        }
        
        @keyframes float-slow {
            0%, 100% { transform: translate(0, 0) scale(1); }
            33% { transform: translate(30px, -30px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
        }
        
        /* Sidebar glass effect */
        .sidebar-glass {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-right: 1px solid rgba(229, 231, 235, 0.5);
        }
        
        /* Nav link styles */
        .nav-link {
            position: relative;
            transition: all 0.2s ease;
            color: #6b7280;
            font-weight: 500;
            text-decoration: none;
            display: block;
            padding: 0.625rem 0;
            margin: 0;
        }
        
        .nav-link:hover {
            color: #111827;
        }
        
        .nav-link.active {
            color: #ec4899;
            font-weight: 600;
        }
        
        .nav-link.active::before {
            content: '';
            position: absolute;
            left: -24px;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 24px;
            background: linear-gradient(135deg, #ec4899 0%, #be185d 100%);
            border-radius: 0 4px 4px 0;
        }
        
        /* Card shadows */
        .card-shadow {
            box-shadow: 
                0 1px 3px rgba(0, 0, 0, 0.12),
                0 1px 2px rgba(0, 0, 0, 0.24);
            transition: all 0.3s cubic-bezier(.25,.8,.25,1);
        }
        
        .card-shadow:hover {
            box-shadow: 
                0 14px 28px rgba(0, 0, 0, 0.25),
                0 10px 10px rgba(0, 0, 0, 0.22);
            transform: translateY(-2px);
        }
        
        /* Magnetic hover effect */
        .magnetic-hover {
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .magnetic-hover:hover {
            transform: translateY(-6px) scale(1.02);
        }
        
        /* Gradient text */
        .gradient-text {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* Gradient themes */
        .gradient-purple {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
        }
        
        .gradient-pink {
            background: linear-gradient(135deg, #ec4899 0%, #be185d 100%);
        }
        
        .gradient-emerald {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        
        /* Toggle switch */
        .toggle-container {
            position: relative;
            width: 48px;
            height: 24px;
        }
        
        .toggle {
            position: absolute;
            width: 100%;
            height: 100%;
            background: #e5e7eb;
            border-radius: 999px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .toggle.active {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            box-shadow: 0 0 12px rgba(16, 185, 129, 0.2);
        }
        
        .toggle-knob {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .toggle.active .toggle-knob {
            transform: translateX(24px);
        }
        
        /* Status dot */
        .status-dot {
            width: 8px;
            height: 8px;
            background: #10b981;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.2);
                opacity: 0.8;
            }
        }
        
        /* Tab styles */
        .tab-btn {
            position: relative;
            padding: 12px 24px;
            font-size: 14px;
            font-weight: 600;
            color: #6b7280;
            background: transparent;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .tab-btn:hover {
            color: #111827;
        }
        
        .tab-btn.active {
            color: #ec4899;
        }
        
        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(135deg, #ec4899 0%, #be185d 100%);
            border-radius: 3px 3px 0 0;
        }
        
        /* Day card styles */
        .day-card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            border: 2px solid #f3f4f6;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .day-card:hover {
            border-color: #d1d5db;
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.08), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .day-card.inactive {
            background: #f9fafb;
            opacity: 0.6;
        }
        
        /* Day consultorio badge */
        .day-consultorio-badge {
            display: inline-flex;
            align-items: center;
            margin-top: 4px;
        }
        
        /* Settings card */
        .settings-card {
            background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid rgba(147, 51, 234, 0.1);
            box-shadow: 0 4px 6px -1px rgba(147, 51, 234, 0.05);
        }
        
        /* Input styles */
        .input-field {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s ease;
            background: white;
        }
        
        .input-field:focus {
            outline: none;
            border-color: #10b981;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }
        
        .input-field.error {
            border-color: #ef4444;
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
        }
        
        /* Select field styling */
        select.input-field {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg width='10' height='6' viewBox='0 0 10 6' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1L5 5L9 1' stroke='%2394a3b8' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 16px center;
            padding-right: 40px;
            cursor: pointer;
        }
        
        /* Icon button */
        .icon-btn {
            width: 36px;
            height: 36px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            background: white;
            border: 2px solid #e5e7eb;
            color: #6b7280;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .icon-btn:hover {
            border-color: #10b981;
            color: #10b981;
            background: #f0fdf4;
            transform: scale(1.1);
        }
        
        /* Consultorio Selector Styles */
        .consultorio-selector-header {
            margin-bottom: 12px;
        }
        
        .consultorio-selector-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 12px;
            margin-top: 12px;
        }
        
        .consultorio-selector-grid.exception-selector {
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 8px;
        }
        
        .consultorio-selector-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            background: white;
        }
        
        .consultorio-selector-item:hover {
            border-color: #a78bfa;
            background: #faf5ff;
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(147, 51, 234, 0.1);
        }
        
        .consultorio-selector-item.selected {
            border-color: #7c3aed;
            background: #f3e8ff;
            box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.1);
        }
        
        .consultorio-selector-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            overflow: hidden;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f3f4f6;
            position: relative;
        }
        
        .consultorio-selector-avatar.small {
            width: 36px;
            height: 36px;
            margin-bottom: 4px;
        }
        
        .consultorio-selector-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .consultorio-color-avatar {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }
        
        .principal-badge-mini {
            position: absolute;
            top: -2px;
            right: -2px;
            width: 16px;
            height: 16px;
            background: #fbbf24;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 8px;
            color: white;
            border: 2px solid white;
        }
        
        .consultorio-selector-name {
            font-size: 12px;
            font-weight: 600;
            color: #374151;
            text-align: center;
            line-height: 1.2;
        }
        
        .consultorio-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 8px;
            background: #f3e8ff;
            border-radius: 8px;
        }
        
        .consultorio-mini-img {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .consultorio-mini-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .consultorio-badge-name {
            font-size: 11px;
            font-weight: 600;
            color: #7c3aed;
        }
        
        /* Calendar styling */
        .calendar-container {
            background: white;
            border-radius: 16px;
            padding: 16px;
            border: 2px solid #e5e7eb;
        }
        
        .calendar-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
        }
        
        .calendar-weekday {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: 700;
            color: #9ca3af;
            text-transform: uppercase;
            position: relative;
        }
        
        .calendar-weekday.open-indicator::before {
            content: '';
            position: absolute;
            top: -4px;
            width: 6px;
            height: 6px;
            background: #10b981;
            border-radius: 50%;
        }
        
        .calendar-days-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
        }
        
        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
            background: #f9fafb;
            position: relative;
        }
        
        .calendar-day:hover:not(.non-clickable) {
            background: #f0fdf4;
            border-color: #10b981;
            transform: scale(1.05);
        }
        
        .calendar-day.non-clickable {
            cursor: default;
            pointer-events: none;
        }
        
        .calendar-day.today {
            border: 3px solid #6366f1;
            background: #f9fafb;
            color: #111827;
        }
        
        /* Synced event indicator */
        .calendar-day.synced::after {
            content: '';
            position: absolute;
            top: 2px;
            right: 2px;
            width: 6px;
            height: 6px;
            background: linear-gradient(135deg, #4285f4 0%, #34a853 100%);
            border-radius: 50%;
            box-shadow: 0 0 4px rgba(66, 133, 244, 0.5);
        }
        
        /* UPDATED: More subtle colors for calendar events - matching label colors */
        .calendar-day.exception {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #fca5a5;
        }
        
        .calendar-day.special-open {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #6ee7b7;
        }
        
        .calendar-day.modified-hours {
            background: #fef3c7;
            color: #92400e;
            border: 1px solid #fde68a;
        }
        
        .calendar-day.vacation {
            background: #ede9fe;
            color: #5b21b6;
            border: 1px solid #c4b5fd;
        }
        
        /* Today with event - keep stronger colors */
        .calendar-day.today.exception {
            background: #fee2e2;
            color: #991b1b;
            border: 3px solid #7c3aed;
        }
        
        .calendar-day.today.special-open {
            background: #d1fae5;
            color: #065f46;
            border: 3px solid #7c3aed;
        }
        
        .calendar-day.today.modified-hours {
            background: #fef3c7;
            color: #92400e;
            border: 3px solid #7c3aed;
        }
        
        .calendar-day.today.vacation {
            background: #ede9fe;
            color: #5b21b6;
            border: 3px solid #4c1d95;
        }
        
        /* Mini calendar for date picker - UPDATED: Remove ALL height restrictions and ensure visibility */
        #date-picker-popup,
        #vacation-start-picker,
        #vacation-end-picker {
            max-height: none !important;
            overflow: visible !important;
        }
        
        /* Ensure popups can extend beyond their containers if needed */
        #single-date-container,
        #vacation-range-fields {
            overflow: visible !important;
        }
        
        /* Ensure all calendar containers are fully visible */
        #mini-calendar,
        #vacation-calendar {
            overflow: visible !important;
            max-height: none !important;
            min-height: 450px; /* Increased to ensure full calendar plus legend is visible */
        }
        
        /* Vacation calendar specific styles */
        #vacation-calendar-popup {
            max-height: none !important;
            overflow: visible !important;
        }
        
        #vacation-confirm-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        #vacation-calendar-popup button {
            transition: all 0.2s ease;
        }
        
        /* Make sure the parent containers don't clip */
        .relative {
            overflow: visible !important;
        }
        
        /* Global overflow fix for calendar popups */
        body {
            overflow-x: hidden;
        }
        
        /* Ensure the exceptions tab container doesn't clip */
        #exceptions-tab,
        #exceptions-tab > div,
        #calendar-sync-tab,
        #calendar-sync-tab > div {
            overflow: visible !important;
        }
        
        .mini-calendar-day {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .mini-calendar-day.eligible {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #10b981;
        }
        
        .mini-calendar-day.eligible:hover {
            background: #10b981;
            color: white;
        }
        
        .mini-calendar-day.not-eligible {
            background: #fee2e2;
            color: #991b1b;
            cursor: not-allowed;
            opacity: 0.5;
        }
        
        .mini-calendar-day.neutral {
            background: #f3f4f6;
            color: #374151;
        }
        
        .mini-calendar-day.neutral:hover {
            background: #e5e7eb;
        }
        
        /* Vacation range styles */
        .mini-calendar-day.vacation-start-selected,
        .mini-calendar-day.vacation-end-selected {
            background: #7c3aed !important;
            color: white !important;
            font-weight: bold;
        }
        
        .mini-calendar-day.vacation-range-preview {
            background: #ede9fe !important;
            color: #5b21b6 !important;
        }
        
        .mini-calendar-legend {
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid #e5e7eb;
            font-size: 10px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
            margin-bottom: 4px;
        }
        
        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 4px;
            border: 1px solid #d1d5db;
        }
        
        /* Custom confirmation modal - FIXED z-index to be above calendars */
        .confirm-modal {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(8px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000; /* Increased from 100 to be above calendars */
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        
        .confirm-modal.show {
            opacity: 1;
            pointer-events: auto;
        }
        
        .confirm-modal-content {
            background: white;
            border-radius: 16px;
            padding: 24px;
            max-width: 400px;
            width: 90%;
            transform: scale(0.9);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .confirm-modal.show .confirm-modal-content {
            transform: scale(1);
        }
        
        /* Modal styles - UPDATED for wider width and proper z-index */
        .modal {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(8px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000; /* Increased to be above calendars */
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        
        .modal.show {
            opacity: 1;
            pointer-events: auto;
        }
        
        .modal-content {
            background: white;
            border-radius: 24px;
            padding: 32px;
            max-width: 640px;  /* UPDATED from 520px to 640px */
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            transform: scale(0.9) translateY(20px);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        
        .modal.show .modal-content {
            transform: scale(1) translateY(0);
        }
        
        /* Label styles */
        .label {
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: #9ca3af;
            margin-bottom: 8px;
        }
        
        /* Stats card */
        .stats-card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            border: 1px solid #e5e7eb;
            transition: all 0.3s ease;
        }
        
        .stats-card:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }
        
        .stats-value {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
            font-size: 1.125rem;
        }
        
        /* Toast notification */
        .toast {
            position: fixed;
            bottom: 24px;
            right: 24px;
            background: #111827;
            color: white;
            padding: 16px 24px;
            border-radius: 12px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 100;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }
        
        /* Error message styles */
        .error-message {
            color: #ef4444;
            font-size: 12px;
            margin-top: 4px;
            display: none;
        }
        
        .error-message.show {
            display: block;
        }
        
        /* Loading overlay */
        #loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            flex-direction: column;
            gap: 1rem;
        }
        
        #loading-overlay.hidden {
            display: none !important;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid #f3f4f6;
            border-top: 3px solid #ec4899;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        .loading-message {
            font-size: 14px;
            color: #6b7280;
            font-weight: 500;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Mobile responsive */
        @media (max-width: 768px) {
            .sidebar-glass {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
                z-index: 40;
                position: fixed;
                top: 0;
                left: 0;
                height: 100vh;
            }
            
            .sidebar-glass.open {
                transform: translateX(0);
            }
            
            main {
                margin-left: 0 !important;
            }
        }
    </style>
</head>
<body class="bg-white text-gray-900">
    <!-- Background decoration -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none z-0">
        <div class="gradient-orb w-96 h-96 bg-indigo-400 -top-48 -right-48"></div>
        <div class="gradient-orb w-80 h-80 bg-purple-400 -bottom-32 -left-32" style="animation-delay: -5s;"></div>
        <div class="gradient-orb w-64 h-64 bg-emerald-400 top-1/2 left-1/3" style="animation-delay: -10s;"></div>
    </div>
    
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="hidden">
        <div class="loading-spinner"></div>
        <div class="loading-message">Cargando...</div>
    </div>
    
    <div class="flex h-screen relative">
        <!-- Sidebar -->
        <aside class="w-64 sidebar-glass relative z-20" id="sidebar">
            <div class="h-full flex flex-col">
                <!-- Title -->
                <div class="px-6" style="padding-top: 50px; padding-bottom: 32px;">
                    <h1 class="text-xl font-black text-gray-800">MediConnect</h1>
                </div>
                
                <!-- Navigation -->
                <nav class="flex-1 space-y-1 px-6">
                    <a href="/dashboard" class="nav-link">Dashboard</a>
                    <a href="/miagenda" class="nav-link">Mi agenda</a>
                    <a href="/patients" class="nav-link">Pacientes</a>
                    <a href="/mis-consultorios" class="nav-link">Mis Consultorios</a>
                    <a href="/configurar-horario" class="nav-link active">Configurar Horario</a>
                    <a href="/configurar-servicios" class="nav-link">Configurar Servicios</a>
                    <a href="/ai-tools" class="nav-link">Asistente medico IA</a>
                    <a href="/soap-notes" class="nav-link">Notas SOAP</a>
                    <a href="/virtual-secretary" class="nav-link">Secretaria Virtual</a>
                </nav>
                
                <!-- User section -->
                <div class="p-6 pt-0 mt-auto border-t border-gray-200">
                    <a href="/account" class="user-profile-link flex items-center gap-3 px-3 py-3 mx-3 rounded-xl hover:bg-purple-50 transition-all cursor-pointer group border border-transparent hover:border-purple-200">
                        <img src="https://images.unsplash.com/photo-1612349317150-e413f6a5b16d?w=40&h=40&fit=crop&crop=faces" 
                             alt="Doctor" 
                             class="w-10 h-10 rounded-full ring-2 ring-gray-200 group-hover:ring-purple-300 transition-all">
                        <div class="flex-1">
                            <p class="text-sm font-semibold text-gray-900 group-hover:text-purple-600 transition-colors" id="doctor-name">Dr. García</p>
                            <div class="flex items-center gap-2">
                                <span class="status-dot"></span>
                                <span class="text-xs text-gray-500 group-hover:text-purple-600 transition-colors">Mi cuenta</span>
                            </div>
                        </div>
                        <i class="fas fa-chevron-right text-gray-400 text-sm group-hover:text-purple-600 transition-all"></i>
                    </a>
                </div>
            </div>
        </aside>
        
        <!-- Mobile menu toggle -->
        <button class="md:hidden fixed bottom-4 right-4 z-30 bg-gradient-to-br from-violet-500 to-purple-600 text-white w-14 h-14 rounded-full shadow-lg flex items-center justify-center" onclick="toggleSidebar()">
            <i class="fas fa-bars"></i>
        </button>
        
        <!-- Main content -->
        <main class="flex-1 bg-gray-50" style="overflow-y: visible; overflow-x: auto;">
            <div class="max-w-7xl mx-auto px-8 py-12" style="overflow: visible !important;">
                <!-- Header -->
                <header class="mb-10">
                    <div class="flex items-center justify-between">
                        <div>
                            <h1 class="text-3xl font-bold text-gray-900 mb-2">
                                Configurar Mi Disponibilidad
                            </h1>
                            <p class="text-lg text-gray-600">
                                Define cuándo y dónde pueden agendar citas tus pacientes
                            </p>
                        </div>
                    </div>
                </header>
                
                <!-- Tabs Section -->
                <div class="bg-white rounded-2xl shadow-lg mb-8" style="overflow: visible !important;">
                    <div class="border-b border-gray-200">
                        <div class="flex">
                            <button class="tab-btn active" onclick="switchTab('regular', this)">
                                <i class="fas fa-calendar-week mr-2"></i>
                                Horario Regular
                            </button>
                            <button class="tab-btn" onclick="switchTab('exceptions', this)">
                                <i class="fas fa-calendar-exclamation mr-2"></i>
                                Eventos Especiales
                            </button>
                            <button class="tab-btn" onclick="switchTab('calendar-sync', this)">
                                <i class="fas fa-sync-alt mr-2"></i>
                                Sincronizar Calendario
                            </button>
                        </div>
                    </div>
                    
                    <!-- Regular Schedule Tab -->
                    <div id="regular-tab" class="p-8">
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            <!-- Main Schedule Area -->
                            <div class="lg:col-span-2 space-y-6">
                                <!-- Days List -->
                                <div class="space-y-4">
                                    <label class="label">
                                        <i class="fas fa-clock text-indigo-500 mr-1"></i>
                                        Tu Semana de Trabajo
                                    </label>
                                    
                                    <!-- Monday -->
                                    <div class="day-card magnetic-hover" data-day="lunes">
                                        <div class="flex items-center gap-4">
                                            <div class="toggle-container">
                                                <div class="toggle" onclick="toggleDay(this, 'lunes')">
                                                    <div class="toggle-knob"></div>
                                                </div>
                                            </div>
                                            <div class="flex-1">
                                                <div class="text-base font-bold text-gray-900">Lunes</div>
                                                <div class="text-sm text-gray-600 mt-1" id="lunes-hours">No disponible</div>
                                            </div>
                                            <div class="flex gap-2">
                                                <button class="icon-btn" onclick="customizeDay('lunes')" title="Personalizar">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="icon-btn" onclick="copyDay('lunes')" title="Copiar horario">
                                                    <i class="fas fa-copy"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Tuesday -->
                                    <div class="day-card magnetic-hover" data-day="martes">
                                        <div class="flex items-center gap-4">
                                            <div class="toggle-container">
                                                <div class="toggle" onclick="toggleDay(this, 'martes')">
                                                    <div class="toggle-knob"></div>
                                                </div>
                                            </div>
                                            <div class="flex-1">
                                                <div class="text-base font-bold text-gray-900">Martes</div>
                                                <div class="text-sm text-gray-600 mt-1" id="martes-hours">No disponible</div>
                                            </div>
                                            <div class="flex gap-2">
                                                <button class="icon-btn" onclick="customizeDay('martes')" title="Personalizar">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="icon-btn" onclick="copyDay('martes')" title="Copiar horario">
                                                    <i class="fas fa-copy"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Wednesday -->
                                    <div class="day-card magnetic-hover" data-day="miércoles">
                                        <div class="flex items-center gap-4">
                                            <div class="toggle-container">
                                                <div class="toggle" onclick="toggleDay(this, 'miércoles')">
                                                    <div class="toggle-knob"></div>
                                                </div>
                                            </div>
                                            <div class="flex-1">
                                                <div class="text-base font-bold text-gray-900">Miércoles</div>
                                                <div class="text-sm text-gray-600 mt-1" id="miércoles-hours">No disponible</div>
                                            </div>
                                            <div class="flex gap-2">
                                                <button class="icon-btn" onclick="customizeDay('miércoles')" title="Personalizar">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="icon-btn" onclick="copyDay('miércoles')" title="Copiar horario">
                                                    <i class="fas fa-copy"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Thursday -->
                                    <div class="day-card magnetic-hover" data-day="jueves">
                                        <div class="flex items-center gap-4">
                                            <div class="toggle-container">
                                                <div class="toggle" onclick="toggleDay(this, 'jueves')">
                                                    <div class="toggle-knob"></div>
                                                </div>
                                            </div>
                                            <div class="flex-1">
                                                <div class="text-base font-bold text-gray-900">Jueves</div>
                                                <div class="text-sm text-gray-600 mt-1" id="jueves-hours">No disponible</div>
                                            </div>
                                            <div class="flex gap-2">
                                                <button class="icon-btn" onclick="customizeDay('jueves')" title="Personalizar">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="icon-btn" onclick="copyDay('jueves')" title="Copiar horario">
                                                    <i class="fas fa-copy"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Friday -->
                                    <div class="day-card magnetic-hover" data-day="viernes">
                                        <div class="flex items-center gap-4">
                                            <div class="toggle-container">
                                                <div class="toggle" onclick="toggleDay(this, 'viernes')">
                                                    <div class="toggle-knob"></div>
                                                </div>
                                            </div>
                                            <div class="flex-1">
                                                <div class="text-base font-bold text-gray-900">Viernes</div>
                                                <div class="text-sm text-gray-600 mt-1" id="viernes-hours">No disponible</div>
                                            </div>
                                            <div class="flex gap-2">
                                                <button class="icon-btn" onclick="customizeDay('viernes')" title="Personalizar">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="icon-btn" onclick="copyDay('viernes')" title="Copiar horario">
                                                    <i class="fas fa-copy"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Saturday -->
                                    <div class="day-card inactive magnetic-hover" data-day="sábado">
                                        <div class="flex items-center gap-4">
                                            <div class="toggle-container">
                                                <div class="toggle" onclick="toggleDay(this, 'sábado')">
                                                    <div class="toggle-knob"></div>
                                                </div>
                                            </div>
                                            <div class="flex-1">
                                                <div class="text-base font-bold text-gray-900">Sábado</div>
                                                <div class="text-sm text-gray-600 mt-1" id="sábado-hours">No disponible</div>
                                            </div>
                                            <div class="flex gap-2">
                                                <button class="icon-btn" onclick="customizeDay('sábado')" title="Personalizar">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="icon-btn" onclick="copyDay('sábado')" title="Copiar horario">
                                                    <i class="fas fa-copy"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Sunday -->
                                    <div class="day-card inactive magnetic-hover" data-day="domingo">
                                        <div class="flex items-center gap-4">
                                            <div class="toggle-container">
                                                <div class="toggle" onclick="toggleDay(this, 'domingo')">
                                                    <div class="toggle-knob"></div>
                                                </div>
                                            </div>
                                            <div class="flex-1">
                                                <div class="text-base font-bold text-gray-900">Domingo</div>
                                                <div class="text-sm text-gray-600 mt-1" id="domingo-hours">No disponible</div>
                                            </div>
                                            <div class="flex gap-2">
                                                <button class="icon-btn" onclick="customizeDay('domingo')" title="Personalizar">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="icon-btn" onclick="copyDay('domingo')" title="Copiar horario">
                                                    <i class="fas fa-copy"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Right Sidebar - Stats Summary Only -->
                            <div class="space-y-6">
                                <!-- Tu Capacidad Semanal with pink style -->
                                <div class="settings-card">
                                    <label class="label">
                                        <i class="fas fa-chart-bar text-purple-500 mr-1"></i>
                                        Tu Capacidad Semanal
                                    </label>
                                    <p class="text-xs text-gray-600 mb-3">
                                        Resumen de tu disponibilidad semanal
                                    </p>
                                    <div class="mt-4 space-y-3">
                                        <div class="flex justify-between items-center">
                                            <span class="text-sm text-gray-600">Horas disponibles</span>
                                            <span class="stats-value" data-stat="hours">0 hrs</span>
                                        </div>
                                        <div class="flex justify-between items-center">
                                            <span class="text-sm text-gray-600">Capacidad</span>
                                            <span class="stats-value" data-stat="slots">0 citas/sem</span>
                                        </div>
                                        <div class="flex justify-between items-center">
                                            <span class="text-sm text-gray-600">Días activos</span>
                                            <span class="stats-value" data-stat="days">0/7</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Exceptions Tab -->
                    <div id="exceptions-tab" class="p-8 hidden" style="overflow: visible !important;">
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8" style="overflow: visible !important;">
                            <!-- Calendar -->
                            <div style="overflow: visible !important;">
                                <label class="label">
                                    <i class="fas fa-calendar text-indigo-500 mr-1"></i>
                                    Marca tus eventos
                                </label>
                                <p class="text-xs text-gray-600 mb-2">
                                    Haz clic en los días donde no estarás disponible
                                </p>
                                <div class="calendar-container" id="exception-calendar">
                                    <div class="calendar-header">
                                        <button onclick="previousMonth()" class="icon-btn w-8 h-8">
                                            <i class="fas fa-chevron-left text-xs"></i>
                                        </button>
                                        <p class="text-sm font-semibold text-gray-900" id="calendar-month-year">Diciembre 2024</p>
                                        <button onclick="nextMonth()" class="icon-btn w-8 h-8">
                                            <i class="fas fa-chevron-right text-xs"></i>
                                        </button>
                                    </div>
                                    <div class="calendar-grid">
                                        <!-- Days of week headers -->
                                        <div class="calendar-weekday" id="weekday-0">L</div>
                                        <div class="calendar-weekday" id="weekday-1">M</div>
                                        <div class="calendar-weekday" id="weekday-2">M</div>
                                        <div class="calendar-weekday" id="weekday-3">J</div>
                                        <div class="calendar-weekday" id="weekday-4">V</div>
                                        <div class="calendar-weekday" id="weekday-5">S</div>
                                        <div class="calendar-weekday" id="weekday-6">D</div>
                                    </div>
                                    <!-- Calendar days grid -->
                                    <div class="calendar-days-grid">
                                        <!-- Days will be generated by JS -->
                                    </div>
                                </div>
                                
                                <div class="mt-4 space-y-3">
                                    <select id="exception-type" class="input-field" onchange="toggleExceptionFields()">
                                        <option value="">-- Selecciona tipo de evento --</option>
                                        <option value="closed">Día cerrado</option>
                                        <option value="special-hours">Horario especial</option>
                                        <option value="special-open">Abrir día especial (normalmente cerrado)</option>
                                        <option value="vacation">Vacaciones</option>
                                    </select>
                                    
                                    <div id="exception-type-description" class="text-xs text-gray-500 italic hidden"></div>
                                    
                                    <div class="relative" id="single-date-container">
                                        <input type="text" id="exception-date" class="input-field" placeholder="Selecciona fecha" readonly onclick="openDatePicker(event)">
                                        <div id="date-picker-popup" class="hidden absolute mt-2 left-0 bg-white rounded-lg shadow-xl border-2 border-gray-200 p-4" style="min-width: 340px; bottom: auto; z-index: 9999;">
                                            <div class="flex justify-between items-center mb-3">
                                                <div class="text-center font-semibold flex-1">Selecciona una fecha</div>
                                                <button onclick="closeDatePicker()" class="text-gray-400 hover:text-gray-600 transition-colors">
                                                    <i class="fas fa-times"></i>
                                                </button>
                                            </div>
                                            <div id="mini-calendar"></div>
                                        </div>
                                    </div>
                                    
                                    <div id="vacation-range-fields" class="hidden space-y-3">
                                        <label class="label">Selecciona el período de vacaciones</label>
                                        <div class="relative">
                                            <input type="text" id="vacation-dates" class="input-field" placeholder="Selecciona fechas de inicio y fin" readonly onclick="openVacationCalendar(event)">
                                            <div id="vacation-calendar-popup" class="hidden absolute mt-2 left-0 bg-white rounded-lg shadow-xl border-2 border-gray-200 p-4" style="min-width: 340px; bottom: auto; z-index: 9999;" onclick="event.stopPropagation();">
                                                <div class="flex justify-between items-center mb-3">
                                                    <div class="text-center font-semibold flex-1">
                                                        <span id="vacation-calendar-title">Selecciona fecha de inicio</span>
                                                    </div>
                                                    <button onclick="closeVacationCalendar()" class="text-gray-400 hover:text-gray-600 transition-colors">
                                                        <i class="fas fa-times"></i>
                                                    </button>
                                                </div>
                                                <div id="vacation-calendar"></div>
                                                <div class="mt-3 flex gap-2">
                                                    <button id="vacation-clear-btn" class="flex-1 px-3 py-2 bg-gray-200 text-gray-700 rounded-lg text-sm font-semibold hover:bg-gray-300 transition-all" onclick="clearVacationDates(event)">
                                                        Limpiar
                                                    </button>
                                                    <button id="vacation-confirm-btn" class="flex-1 px-3 py-2 bg-emerald-500 text-white rounded-lg text-sm font-semibold hover:bg-emerald-600 transition-all disabled:bg-gray-300 disabled:cursor-not-allowed" onclick="confirmVacationDates(event)" disabled>
                                                        Confirmar
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div id="exception-time-fields" class="hidden space-y-3">
                                        <input type="time" id="exception-opens" class="input-field" placeholder="Abre a las" onchange="validateExceptionTime()">
                                        <input type="time" id="exception-closes" class="input-field" placeholder="Cierra a las" onchange="validateExceptionTime()">
                                    </div>
                                    
                                    <!-- Consultorio Selector for Exceptions -->
                                    <div id="exception-consultorio-container" class="hidden">
                                        <div id="exception-consultorio-selector"></div>
                                    </div>
                                    
                                    <div id="exception-breaks-container" class="hidden space-y-3">
                                        <label class="label">Descansos del día especial</label>
                                        <div id="exception-break-blocks-container">
                                            <!-- Break blocks will be added here -->
                                        </div>
                                        <button class="px-4 py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-emerald-400 hover:text-emerald-600 transition-all" onclick="addExceptionBreak()">
                                            <i class="fas fa-plus mr-1"></i>
                                            Agregar Descanso
                                        </button>
                                    </div>
                                    
                                    <input type="text" id="exception-reason" class="input-field" placeholder="Motivo (opcional)">
                                    
                                    <button class="w-full py-3 px-4 border-2 border-gray-300 rounded-xl text-gray-700 font-semibold hover:bg-gray-50 hover:border-gray-400 transition-all flex items-center justify-center gap-2" onclick="addException()">
                                        <i class="fas fa-plus"></i>
                                        <span>Agregar Evento</span>
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Exceptions List -->
                            <div class="lg:col-span-2 space-y-4">
                                <label class="label">
                                    <i class="fas fa-list text-indigo-500 mr-1"></i>
                                    Eventos y Fechas Especiales
                                </label>
                                <p class="text-sm text-gray-600 mb-4">
                                    Gestiona tus días especiales y excepciones
                                </p>
                                
                                <div id="exception-list">
                                    <!-- Exceptions will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Calendar Sync Tab -->
                    <div id="calendar-sync-tab" class="p-8 hidden" style="overflow: visible !important;">
                        <!-- Connection Options -->
                        <div id="calendar-connection-options" style="display: none;">
                            <div class="text-center mb-8">
                                <h3 class="text-2xl font-bold text-gray-900 mb-3">Conecta tu Calendario</h3>
                                <p class="text-gray-600">Sincroniza automáticamente tus eventos y mantén tu agenda actualizada</p>
                            </div>
                            
                            <div class="flex gap-6 justify-center">
                                <!-- Google Calendar Card -->
                                <div class="calendar-provider-card" id="google-calendar-connect">
                                    <div class="provider-icon google-icon">
                                        <i class="fab fa-google"></i>
                                    </div>
                                    <h4 class="provider-name">Google Calendar</h4>
                                    <p class="provider-description">Sincroniza con tu cuenta de Google y Gmail</p>
                                    <button class="connect-btn connect-google-btn">
                                        <i class="fab fa-google mr-2"></i>
                                        Conectar con Google
                                    </button>
                                </div>
                                
                                <!-- Apple Calendar Card -->
                                <div class="calendar-provider-card" id="apple-calendar-connect">
                                    <div class="provider-icon apple-icon">
                                        <i class="fab fa-apple"></i>
                                    </div>
                                    <h4 class="provider-name">Apple Calendar</h4>
                                    <p class="provider-description">Sincroniza con iCloud y dispositivos Apple</p>
                                    <button class="connect-btn connect-apple-btn">
                                        <i class="fab fa-apple mr-2"></i>
                                        Conectar con Apple
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Connected Panel -->
                        <div id="calendar-connection-panel" style="display: none;">
                            <div class="connection-header">
                                <div class="connection-info">
                                    <div class="connection-status">
                                        <i class="fas fa-check"></i>
                                    </div>
                                    <div class="connection-details">
                                        <h3>Calendario Conectado</h3>
                                        <div class="connection-email">
                                            <i class="fas fa-envelope"></i>
                                            <span id="connected-email">usuario@gmail.com</span>
                                            <span class="text-gray-400">•</span>
                                            <span id="connected-provider">Google Calendar</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="connection-actions">
                                    <button class="action-btn disconnect-btn" onclick="disconnectCalendar()">
                                        <i class="fas fa-unlink mr-1"></i>
                                        Desconectar
                                    </button>
                                    <button class="action-btn change-account-btn" onclick="changeCalendarAccount()">
                                        <i class="fas fa-exchange-alt mr-1"></i>
                                        Cambiar cuenta
                                    </button>
                                </div>
                            </div>
                            
                            <div class="sync-settings">
                                <div class="settings-title">
                                    <i class="fas fa-cog"></i>
                                    Configuración de Sincronización
                                </div>
                                
                                <div class="setting-item">
                                    <div class="setting-label">
                                        <div class="setting-icon">
                                            <i class="fas fa-layer-group"></i>
                                        </div>
                                        <div class="setting-text">
                                            <h4>Mezclar calendarios</h4>
                                            <p>Mostrar citas médicas en Google/Apple Calendar</p>
                                        </div>
                                    </div>
                                    <div class="setting-toggle">
                                        <input type="checkbox" id="merge-calendars-toggle">
                                        <label class="toggle-slider" for="merge-calendars-toggle"></label>
                                    </div>
                                </div>
                                
                                <div class="setting-item">
                                    <div class="setting-label">
                                        <div class="setting-icon">
                                            <i class="fas fa-bell"></i>
                                        </div>
                                        <div class="setting-text">
                                            <h4>Notificaciones móviles</h4>
                                            <p>Recibir notificaciones médicas en el móvil</p>
                                        </div>
                                    </div>
                                    <div class="setting-toggle">
                                        <input type="checkbox" id="notifications-toggle">
                                        <label class="toggle-slider" for="notifications-toggle"></label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="sync-status-section">
                                <div class="sync-status-header">
                                    <div class="last-sync-info">
                                        <i class="fas fa-clock"></i>
                                        <span>Última sincronización:</span>
                                        <strong id="last-sync-time">Nunca</strong>
                                    </div>
                                    <button class="sync-now-btn" id="sync-now-btn">
                                        <i class="fas fa-sync"></i>
                                        Sincronizar Ahora
                                    </button>
                                </div>
                                <div id="sync-status"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- Modal for Day Customization -->
    <div id="day-modal" class="modal">
        <div class="modal-content">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-xl font-bold text-gray-900">Personalizar Horario</h3>
                <button onclick="closeModal()" class="icon-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="space-y-6">
                <div>
                    <label class="label">Horario de Trabajo</label>
                    <div class="flex items-center gap-3">
                        <input type="time" value="09:00" name="opens_at" class="input-field" onchange="validateBreaksOnScheduleChange()">
                        <span class="text-gray-400">—</span>
                        <input type="time" value="19:00" name="closes_at" class="input-field" onchange="validateBreaksOnScheduleChange()">
                    </div>
                    <div class="error-message" id="schedule-error"></div>
                </div>
                
                <!-- Consultorio Selector for Day -->
                <div id="consultorio-selector">
                    <!-- Will be populated by JavaScript -->
                </div>
                
                <div>
                    <label class="label">Bloques de Descanso</label>
                    <div class="space-y-3 mt-2" id="break-blocks-container">
                        <!-- Break blocks will be added here dynamically -->
                    </div>
                    <div class="error-message" id="breaks-error"></div>
                    <button class="mt-3 px-4 py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-emerald-400 hover:text-emerald-600 transition-all" onclick="addBreak()">
                        <i class="fas fa-plus mr-1"></i>
                        Agregar Descanso
                    </button>
                </div>
                
                <div>
                    <label class="label">Aplicar a Otros Días</label>
                    <div class="grid grid-cols-3 gap-3 mt-2 apply-days-container">
                        <!-- Checkboxes will be dynamically generated here -->
                    </div>
                </div>
            </div>
            
            <div class="flex gap-3 mt-8">
                <button class="btn-primary flex-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-xl font-semibold hover:shadow-lg transition-all" onclick="saveDay()">
                    <i class="fas fa-check mr-2"></i>
                    Guardar Cambios
                </button>
                <button class="flex-1 px-6 py-3 border-2 border-gray-300 rounded-xl text-gray-700 font-semibold hover:bg-gray-50 transition-all" onclick="closeModal()">
                    Cancelar
                </button>
            </div>
        </div>
    </div>
    
    <!-- Toast Notification -->
    <div id="toast" class="toast">
        <i class="fas fa-check-circle text-emerald-400"></i>
        <span id="toast-message">Cambios guardados</span>
    </div>
    
    <!-- Custom Confirmation Modal -->
    <div id="confirm-modal" class="confirm-modal">
        <div class="confirm-modal-content">
            <h3 class="text-lg font-bold text-gray-900 mb-3">Confirmar eliminación</h3>
            <p class="text-sm text-gray-600 mb-6" id="confirm-message">¿Estás seguro de eliminar este evento?</p>
            <div class="flex gap-3">
                <button class="flex-1 bg-red-500 text-white py-2 px-4 rounded-lg font-semibold hover:bg-red-600 transition-all" onclick="confirmDelete()">
                    Eliminar
                </button>
                <button class="flex-1 bg-gray-200 text-gray-700 py-2 px-4 rounded-lg font-semibold hover:bg-gray-300 transition-all" onclick="cancelDelete()">
                    Cancelar
                </button>
            </div>
        </div>
    </div>
    
    <!-- Load scripts -->
    <script src="/static/js/app.js"></script>
    <script src="/static/js/api.js"></script>
    <script src="/static/js/notifications.js"></script>
    <script src="/static/js/calendar_sync.js"></script>
    <script src="/static/js/horarios.js"></script>
</body>
</html>